package polymorphism;


import polymorphism.characters.Khajit;
import polymorphism.characters.Mage;
import polymorphism.characters.Nord;
import polymorphism.characters.GameCharacter;
import java.util.Random;


public class FightToDeath {

	public static void main(String[] args) {
		
		Random rand = new Random();
		
		GameCharacter[] characters = {
	            new Nord("Stormcloak", 50, 50, 50),
	            new Khajit("Nkaris", 50, 50, 50),
	            new Mage("Altmer", 50, 50, 50),
	            new Mage("Dunmer", 50, 50, 50)};

		System.out.println("Four Skyrim characters will fight to the DEATH!");
		System.out.println("Player 1: " + characters[0]);
		System.out.println("Player 2: " + characters[1]);
		System.out.println("Player 3: " + characters[2]);
		System.out.println("Player 4: " + characters[3]);
		
		
		GameCharacter first = null;
		GameCharacter second = null;
		GameCharacter third = null;
		GameCharacter fourth = null;
		
		while (first == null) {
			int index = rand.nextInt(characters.length); 
		    if (characters[index].isAlive()) {
		        first = characters[index];}}
		
		
		while (second == null) {
		    int index = rand.nextInt(characters.length);
		    if (characters[index].isAlive() && characters[index] != first) {
		        second = characters[index];}}

		System.out.println("First fighter: " + first);
		System.out.println("Second fighter: " + second);
		
		int round = 1;

		while (first.isAlive() && second.isAlive()) {
		    System.out.println("\n=== Round " + round++ + " ===");

		    for (int hit = 1; hit <= 3; hit++) {

		        int dmg1 = first.attack();
		        second.takeDamage(dmg1);
		        System.out.println(first + " hits " + second + " for " + dmg1 +
		                           " (HP now: " + second.getHealth() + ")");
		        if (!second.isAlive()) {
		            System.out.println(second + " has fallen! " + first + " wins!");
		            break; 
		        }

		     
		        int dmg2 = second.attack();
		        first.takeDamage(dmg2);
		        System.out.println(second + " hits " + first + " for " + dmg2 +
		                           " (HP now: " + first.getHealth() + ")");
		        if (!first.isAlive()) {
		            System.out.println(first + " has fallen! " + second + " wins!");
		            break;
		        }
		    }

		    System.out.println("End of round: " +
		        first.getHealth() + " vs " + second.getHealth());
		}
	}

}
